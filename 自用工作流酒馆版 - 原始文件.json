{"last_node_id":52,"last_link_id":78,"nodes":[{"id":7,"type":"CLIPTextEncode","pos":[450,-550],"size":[420,110],"flags":{},"order":6,"mode":0,"inputs":[{"name":"clip","label":"CLIP","type":"CLIP","link":25}],"outputs":[{"name":"CONDITIONING","label":"条件","type":"CONDITIONING","links":[62],"slot_index":0}],"properties":{"Node name for S&R":"CLIPTextEncode"},"widgets_values":["负面"],"color":"#322","bgcolor":"#533"},{"id":40,"type":"Skimmed CFG - linear interpolation","pos":[910,-760],"size":[290,70],"flags":{"collapsed":false},"order":10,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":60}],"outputs":[{"name":"MODEL","type":"MODEL","links":[61],"slot_index":0}],"properties":{"Node name for S&R":"Skimmed CFG - linear interpolation"},"widgets_values":[5.5]},{"id":41,"type":"Support empty uncond","pos":[910,-650],"size":[290,60],"flags":{"collapsed":false},"order":13,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":61}],"outputs":[{"name":"MODEL","type":"MODEL","links":[59],"slot_index":0}],"properties":{"Node name for S&R":"Support empty uncond"},"widgets_values":["from cond"]},{"id":14,"type":"CheckpointLoaderSimple","pos":[110,-750],"size":[315,98],"flags":{},"order":0,"mode":0,"inputs":[],"outputs":[{"name":"MODEL","label":"模型","type":"MODEL","links":[56],"slot_index":0},{"name":"CLIP","label":"CLIP","type":"CLIP","links":[25,53,69],"slot_index":1},{"name":"VAE","label":"VAE","type":"VAE","links":[68],"slot_index":2}],"properties":{"Node name for S&R":"CheckpointLoaderSimple"},"widgets_values":["wai.safetensors"]},{"id":39,"type":"WeiLinComfyUIPromptToLorasOnly","pos":[450,-750],"size":[420,150],"flags":{},"order":7,"mode":0,"inputs":[{"name":"model","label":"model","type":"MODEL","link":56},{"name":"clip","label":"clip","type":"CLIP","link":53}],"outputs":[{"name":"model","label":"model","type":"MODEL","links":[60],"slot_index":0},{"name":"正向条件 CONDITIONING","label":"正向条件 CONDITIONING","type":"CONDITIONING","links":[70],"slot_index":1}],"properties":{"Node name for S&R":"WeiLinComfyUIPromptToLorasOnly"},"widgets_values":["正面",""]},{"id":43,"type":"ConditioningSetTimestepRange","pos":[910,-350],"size":[290,90],"flags":{"collapsed":false},"order":9,"mode":0,"inputs":[{"name":"conditioning","type":"CONDITIONING","link":62}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","links":[71],"slot_index":0}],"properties":{"Node name for S&R":"ConditioningSetTimestepRange"},"widgets_values":[0,0.7000000000000001],"color":"#223","bgcolor":"#335"},{"id":45,"type":"Anything Everywhere3","pos":[1220,-760],"size":[240,80],"flags":{"collapsed":false},"order":17,"mode":0,"inputs":[{"name":"MODEL","label":"MODEL","type":"*","shape":7,"color_on":"#B39DDB","link":67},{"name":"VAE","label":"VAE","type":"*","shape":7,"color_on":"#FF6E6E","link":68},{"name":"CLIP","label":"CLIP","type":"*","shape":7,"color_on":"#FFD500","link":69}],"outputs":[],"properties":{"Node name for S&R":"Anything Everywhere3","group_restricted":0,"color_restricted":0},"widgets_values":[]},{"id":44,"type":"Prompts Everywhere","pos":[1220,-640],"size":[240,60],"flags":{},"order":12,"mode":0,"inputs":[{"name":"CONDITIONING","label":"CONDITIONING","type":"*","shape":7,"color_on":"#FFA931","link":70},{"name":"CONDITIONING","label":"CONDITIONING","type":"*","shape":7,"color_on":"#FFA931","link":71}],"outputs":[],"properties":{"Node name for S&R":"Prompts Everywhere","group_restricted":0,"color_restricted":0},"widgets_values":[]},{"id":5,"type":"EmptyLatentImage","pos":[110,190],"size":[310,106],"flags":{},"order":1,"mode":0,"inputs":[],"outputs":[{"name":"LATENT","label":"Latent","type":"LATENT","links":[23]}],"properties":{"Node name for S&R":"EmptyLatentImage"},"widgets_values":[1024,1024,1]},{"id":25,"type":"SAMLoader","pos":[800,70],"size":[320,82],"flags":{},"order":2,"mode":0,"inputs":[],"outputs":[{"name":"SAM_MODEL","label":"SAM模型","type":"SAM_MODEL","links":[46]}],"properties":{"Node name for S&R":"SAMLoader"},"widgets_values":["sam_vit_b_01ec64.pth","AUTO"]},{"id":26,"type":"UltralyticsDetectorProvider","pos":[800,190],"size":[320,80],"flags":{},"order":3,"mode":0,"inputs":[],"outputs":[{"name":"BBOX_DETECTOR","label":"BBox检测","type":"BBOX_DETECTOR","links":null},{"name":"SEGM_DETECTOR","label":"SEGM检测","type":"SEGM_DETECTOR","links":[50],"slot_index":1}],"properties":{"Node name for S&R":"UltralyticsDetectorProvider"},"widgets_values":["segm/person_yolov8m-seg.pt"]},{"id":23,"type":"UltralyticsDetectorProvider","pos":[800,-50],"size":[320,80],"flags":{},"order":4,"mode":0,"inputs":[],"outputs":[{"name":"BBOX_DETECTOR","label":"BBox检测","type":"BBOX_DETECTOR","links":[45]},{"name":"SEGM_DETECTOR","label":"SEGM检测","type":"SEGM_DETECTOR","links":[],"slot_index":1}],"properties":{"Node name for S&R":"UltralyticsDetectorProvider"},"widgets_values":["bbox/face_yolov8m.pt"]},{"id":3,"type":"KSampler","pos":[110,-140],"size":[310,290],"flags":{},"order":8,"mode":0,"inputs":[{"name":"model","label":"模型","type":"MODEL","link":null},{"name":"positive","label":"正面条件","type":"CONDITIONING","link":null},{"name":"negative","label":"负面条件","type":"CONDITIONING","link":null},{"name":"latent_image","label":"Latent","type":"LATENT","link":23}],"outputs":[{"name":"LATENT","label":"Latent","type":"LATENT","links":[74],"slot_index":0}],"properties":{"Node name for S&R":"KSampler"},"widgets_values":[777693796350871,"randomize",80,5.5,"euler","normal",1],"color":"#432","bgcolor":"#653","shape":1},{"id":8,"type":"VAEDecode","pos":[800,-140],"size":[320,50],"flags":{},"order":14,"mode":0,"inputs":[{"name":"samples","label":"Latent","type":"LATENT","link":78},{"name":"vae","label":"VAE","type":"VAE","link":null}],"outputs":[{"name":"IMAGE","label":"图像","type":"IMAGE","links":[39],"slot_index":0}],"properties":{"Node name for S&R":"VAEDecode"},"widgets_values":[]},{"id":30,"type":"SaveImage","pos":[1490,-140],"size":[315,270],"flags":{},"order":18,"mode":0,"inputs":[{"name":"images","label":"图像","type":"IMAGE","link":48}],"outputs":[],"properties":{"Node name for S&R":"SaveImage"},"widgets_values":["ComfyUI"]},{"id":48,"type":"IterativeLatentUpscale","pos":[440,-140],"size":[344.3999938964844,150],"flags":{},"order":11,"mode":0,"inputs":[{"name":"samples","type":"LATENT","link":74},{"name":"upscaler","type":"UPSCALER","link":75}],"outputs":[{"name":"latent","type":"LATENT","links":[78],"slot_index":0},{"name":"vae","type":"VAE","links":null}],"properties":{"Node name for S&R":"IterativeLatentUpscale"},"widgets_values":[1.5,1,"","simple"],"color":"#432","bgcolor":"#653","shape":1},{"id":42,"type":"ApplyFBCacheOnModel","pos":[910,-550],"size":[290,160],"flags":{"collapsed":false},"order":15,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":59}],"outputs":[{"name":"MODEL","type":"MODEL","links":[67],"slot_index":0}],"properties":{"Node name for S&R":"ApplyFBCacheOnModel"},"widgets_values":["diffusion_model",0.2,0,1,4],"color":"#223","bgcolor":"#335"},{"id":35,"type":"FaceDetailer","pos":[1130,-140],"size":[350,968],"flags":{},"order":16,"mode":0,"inputs":[{"name":"image","label":"图像","type":"IMAGE","link":39},{"name":"model","label":"模型","type":"MODEL","link":null},{"name":"clip","label":"CLIP","type":"CLIP","link":null},{"name":"vae","label":"VAE","type":"VAE","link":null},{"name":"positive","label":"正面条件","type":"CONDITIONING","link":null},{"name":"negative","label":"负面条件","type":"CONDITIONING","link":null},{"name":"bbox_detector","label":"BBox检测","type":"BBOX_DETECTOR","link":45},{"name":"sam_model_opt","label":"SAM模型","type":"SAM_MODEL","shape":7,"link":46},{"name":"segm_detector_opt","label":"Segm检测","type":"SEGM_DETECTOR","shape":7,"link":50},{"name":"detailer_hook","label":"细化约束","type":"DETAILER_HOOK","shape":7,"link":null},{"name":"scheduler_func_opt","type":"SCHEDULER_FUNC","shape":7,"link":null}],"outputs":[{"name":"image","label":"图像","type":"IMAGE","links":[48],"slot_index":0},{"name":"cropped_refined","label":"细化图像","type":"IMAGE","shape":6,"links":null},{"name":"cropped_enhanced_alpha","label":"细化部分","type":"IMAGE","shape":6,"links":null},{"name":"mask","label":"遮罩","type":"MASK","links":null},{"name":"detailer_pipe","label":"细化节点束","type":"DETAILER_PIPE","links":null},{"name":"cnet_images","label":"ControlNet图像","type":"IMAGE","shape":6,"links":null}],"properties":{"Node name for S&R":"FaceDetailer"},"widgets_values":[1024,true,1024,838816117756455,"randomize",15,5.5,"euler","AYS SDXL",0.4,5,true,true,0.5,10,3,"center-1",0,0.93,0,0.7000000000000001,"False",10,"",1,false,20,true,false],"color":"#432","bgcolor":"#653","shape":1},{"id":49,"type":"PixelKSampleUpscalerProvider","pos":[440,50],"size":[352.79998779296875,394],"flags":{},"order":5,"mode":0,"inputs":[{"name":"model","type":"MODEL","link":null},{"name":"vae","type":"VAE","link":null},{"name":"positive","type":"CONDITIONING","link":null},{"name":"negative","type":"CONDITIONING","link":null},{"name":"upscale_model_opt","type":"UPSCALE_MODEL","shape":7,"link":null},{"name":"pk_hook_opt","type":"PK_HOOK","shape":7,"link":null},{"name":"scheduler_func_opt","type":"SCHEDULER_FUNC","shape":7,"link":null}],"outputs":[{"name":"UPSCALER","type":"UPSCALER","links":[75]}],"properties":{"Node name for S&R":"PixelKSampleUpscalerProvider"},"widgets_values":["lanczos",0,"randomize",15,5.5,"euler","AYS SDXL",0.4,false,1024],"color":"#323","bgcolor":"#535"}],"links":[[23,5,0,3,3,"LATENT"],[25,14,1,7,0,"CLIP"],[39,8,0,35,0,"IMAGE"],[45,23,0,35,6,"BBOX_DETECTOR"],[46,25,0,35,7,"SAM_MODEL"],[48,35,0,30,0,"IMAGE"],[50,26,1,35,8,"SEGM_DETECTOR"],[53,14,1,39,1,"CLIP"],[56,14,0,39,0,"MODEL"],[59,41,0,42,0,"MODEL"],[60,39,0,40,0,"MODEL"],[61,40,0,41,0,"MODEL"],[62,7,0,43,0,"CONDITIONING"],[67,42,0,45,0,"MODEL"],[68,14,2,45,1,"VAE"],[69,14,1,45,2,"CLIP"],[70,39,1,44,0,"CONDITIONING"],[71,43,0,44,1,"CONDITIONING"],[74,3,0,48,0,"LATENT"],[75,49,0,48,1,"UPSCALER"],[78,48,0,8,0,"LATENT"]],"groups":[{"id":1,"title":"设置","bounding":[100,-830,1370,583.5999755859375],"color":"#3f789e","font_size":24,"flags":{}},{"id":2,"title":"生图","bounding":[100,-210,1715,1031.5999755859375],"color":"#3f789e","font_size":24,"flags":{}}],"config":{},"extra":{"ds":{"scale":1,"offset":[-54.66941504713941,337.4819629770743]},"node_versions":{"comfy-core":"0.3.14","skimmed_cfg":"2712803a8b721665d43d5aeb4430e5ac0e931091","pre_cfg_comfy_nodes_for_comfyui":"195e434380ceb9dcb60796ad3e10ccdc20ab9a08","WeiLin-ComfyUI-prompt-all-in-one":"4b972208194a8831fef24ae62c6cc4936ce868f5","cg-use-everywhere":"ce510b97d10e69d5fd0042e115ecd946890d2079","ComfyUI-Impact-Pack":"c6056b132d7e155c3ece42b77e08ea45bde1bfef","ComfyUI-Impact-Subpack":"74db20c95eca152a6d686c914edc0ef4e4762cb8","Comfy-WaveSpeed":"3db162bb7ad56b84a452a4778527da63793c0e87"},"ue_links":[{"downstream":3,"downstream_slot":0,"upstream":"42","upstream_slot":0,"controller":45,"type":"MODEL"},{"downstream":3,"downstream_slot":1,"upstream":"39","upstream_slot":1,"controller":44,"type":"CONDITIONING"},{"downstream":3,"downstream_slot":2,"upstream":"43","upstream_slot":0,"controller":44,"type":"CONDITIONING"},{"downstream":8,"downstream_slot":1,"upstream":"14","upstream_slot":2,"controller":45,"type":"VAE"},{"downstream":35,"downstream_slot":1,"upstream":"42","upstream_slot":0,"controller":45,"type":"MODEL"},{"downstream":35,"downstream_slot":2,"upstream":"14","upstream_slot":1,"controller":45,"type":"CLIP"},{"downstream":35,"downstream_slot":3,"upstream":"14","upstream_slot":2,"controller":45,"type":"VAE"},{"downstream":35,"downstream_slot":4,"upstream":"39","upstream_slot":1,"controller":44,"type":"CONDITIONING"},{"downstream":35,"downstream_slot":5,"upstream":"43","upstream_slot":0,"controller":44,"type":"CONDITIONING"},{"downstream":49,"downstream_slot":0,"upstream":"42","upstream_slot":0,"controller":45,"type":"MODEL"},{"downstream":49,"downstream_slot":1,"upstream":"14","upstream_slot":2,"controller":45,"type":"VAE"},{"downstream":49,"downstream_slot":2,"upstream":"39","upstream_slot":1,"controller":44,"type":"CONDITIONING"},{"downstream":49,"downstream_slot":3,"upstream":"43","upstream_slot":0,"controller":44,"type":"CONDITIONING"}]},"version":0.4}